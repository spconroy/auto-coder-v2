# auto-coder-v2

Scaffold for a local-first autonomous coding agent powered by Ollama and MCP tooling.

## Getting Started

1. Install dependencies (the CLI uses npm workbench tooling):
   ```sh
   npm install
   ```
   *Optional but recommended:* Install [Ollama](https://ollama.com) and pull the model referenced by `coder.config.json` (defaults to `qwen2.5-coder:14b`).
2. Run the CLI in dev mode:
   ```sh
   npm run dev -- --help
   ```
3. Build the distributable bundle when ready:
   ```sh
   npm run build
   ```
4. Execute the unit test suite:
   ```sh
   npm test
   ```
5. Run the end-to-end demo task (plans, applies diff, runs tests):
   ```sh
   ./scripts/demo.sh
   ```
   *Requires a clean git working tree because the agent creates a dedicated branch.*
   - Pass `--use-llm` to skip the prebuilt diff and ask the configured Ollama model to generate one on the fly.

> The current CLI wires up `plan`, `show`, `run`, and `resume` with lightweight helpers (task generation, persistence, and state tracking). MCP-backed execution still needs to be filled in per the `spec.md` checklist.

### Current Limitation
- LLM-generated diffs for documentation tasks (README.md, AGENTS.md) are not yet reliable; the agent rejects malformed patches until we integrate a more instruction-following model.

## Project Structure

- `src/cli` – Command-line entry point (Commander-based surface).
- `src/core` – Task planning, persistence, run-state helpers, and git orchestration.
- `src/daemon` – Placeholder for the MCP JSON-RPC server.
- `src/utils` – Shared filesystem/id utilities.
- `coder.config.json` – Default configuration values referenced by future features.
- `.coder/` – Runtime state, logs (`.jsonl`), and task/spec artifacts generated by the CLI.
- optional `.coder/patches/<taskId>/<stepId>.diff` files can be dropped in to feed edit/doc steps. The demo script copies `examples/sample-task/patches/s2.diff` into place by default; use `--use-llm` to rely on the Ollama model instead.

Refer to `AGENTS.md` and `spec.md` for contributor guidance and the detailed implementation roadmap.
